set(PLATFORM VS)

# This one is important
set(CMAKE_SYSTEM_NAME Windows)

set(STRIP_TOOL "")
set(CMAKE_CXX_FLAGS "/W4 /EHsc /D_WIN32_WINNT=0x0601 /D_CRT_SECURE_NO_WARNINGS")
set(CMAKE_CXX_STANDARD_LIBRARIES "Ws2_32.lib ${CMAKE_CXX_STANDARD_LIBRARIES}") #TODO
set(CMAKE_EXE_LINKER_FLAGS /MANIFEST:NO )

# Set build targets
macro(SET_BUILD_TARGET build_dir build install)
	add_cmake_build_cmd( ${build_dir} "ALL_BUILD" "" ${build} )
	add_cmake_build_cmd( ${build_dir} "INSTALL" "" ${install} )
endmacro(SET_BUILD_TARGET)

# PATHs

# External packages
file( TO_CMAKE_PATH $ENV{EXTERNALS_PATH} EXTERNALS_PATH )

# Xerces
SET(ENV{XERCESCDIR} ${EXTERNALS_PATH})

# Lua
SET(ENV{LUA_DIR} ${EXTERNALS_PATH})

# DB
SET(ENV{DB_DIR} ${EXTERNALS_PATH})

# CEF
SET(ENV{CEF_DIR} ${EXTERNALS_PATH})

# ZLIB
SET(ENV{ZLIB_DIR} ${EXTERNALS_PATH})

# CURL
SET(ENV{CURL_DIR} ${EXTERNALS_PATH})

# PNG
# SET(ENV{PNG_DIR} ${EXTERNALS_PATH})

# FreeType
SET(ENV{FREETYPE_DIR} $ENV{EXTERNALS_PATH})

# FontConfig
SET(ENV{FONTCONFIG_DIR} $ENV{EXTERNALS_PATH})

# GDK-PixBuf
SET(ENV{GDK-PIXBUF_DIR} $ENV{EXTERNALS_PATH})

# GLIB
SET(ENV{GLIB_DIR} $ENV{EXTERNALS_PATH})

# CAIRO
SET(ENV{CAIRO_DIR} $ENV{EXTERNALS_PATH})

# VLC
SET(ENV{LIB_DIR} ${EXTERNALS_PATH})

# gtest
SET(GTEST_MSVC_SEARCH "MD") # << No creo que sirva esto
SET(GTEST_ROOT       ${EXTERNALS_PATH})

# Boost
SET(BOOST_ROOT  ${EXTERNALS_PATH} )
SET(Boost_NO_SYSTEM_PATHS TRUE)
#set(Boost_DEBUG TRUE)
set(Boost_USE_MULTITHREADED  ON)
set(Boost_USE_STATIC_RUNTIME OFF)
set(Boost_USE_STATIC_LIBS    OFF)

# no auto-link,
# BOOST_PROGRAM_OPTIONS_DYN_LINK is required to properly import some symbols from program_options
# (http://lists.boost.org/boost-users/2009/11/54015.php)
add_definitions(/DBOOST_ALL_NO_LIB /DBOOST_PROGRAM_OPTIONS_DYN_LINK)

# MINIZIP
SET(ENV{MINIZIP_DIR} ${EXTERNALS_PATH})

# LIBEVENT
SET(ENV{LIBEVENT_DIR} ${EXTERNALS_PATH})

# Options
set(UTIL_BASE_USE_WINDOWS 1)
set(DVB_USE_BDA 1)
set(CANVAS_AUDIO_USE_PULSE 0)
set(GINGA_PACKAGE_USE_VS 1)
set(WARI_PACKAGE_USE_VS 1)

set(ZAPPER_MPEG_PLAYER \"ts\")
